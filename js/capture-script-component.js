!function(e,i){function n(e){e.find(".field-error").remove()}function t(){var i,n=e("form");n.length>0&&(i=null,e.each(n,(function(){(i=e(this)).find("div.bee-form-row").show(),i.find("div.form-row").show(),i.find('button[type="submit"]').show(),i.find("div.loading-box").hide(),i.find("div.error-box").hide(),r(i,"grid")})))}function o(){var i,n=e("form:not([formulario-externo])");n.length>0&&(i=null,e.each(n,(function(){var n,o,r,s,l,p=null,f=[],h=[];(i=e(this)).prop("action","/capture"),i.prop("method","post"),0==i.find('button[type="submit"]').length&&i.find("button:first").prop("type","submit"),i.find("#mid").length>0?i.find("#mid").val(_machineID):((p=e("<input />")).prop({id:"mid",name:"mid",type:"hidden"}),p.val(_machineID),h.push(p.clone())),i.find("#pid").length>0?i.find("#pid").val(_pageID):((p=e("<input />")).prop({id:"pid",name:"pid",type:"hidden"}),p.val(_pageID),h.push(p.clone())),(n=i.find('input[type="hidden"][name="hdn-dynamic-fields"]'))&&n.length>0&&(o=parseInt(n.attr("id").split("-")[3]),i.find("#bid").length>0?i.find("#bid").val(o):((p=e("<input />")).prop({id:"bid",name:"bid",type:"hidden"}),p.val(o),h.push(p.clone())),e(n).remove()),i.find("#list_id").length>0?i.find("#list_id").val(_machineID):((p=e("<input />")).prop({id:"list_id",name:"list_id",type:"hidden"}),p.val(_machineID),h.push(p.clone())),i.find("#provider").length>0?i.find("#provider").val("leadlovers"):((p=e("<input />")).prop({id:"provider",name:"provider",type:"hidden"}),p.val("leadlovers"),h.push(p.clone())),i.find("#formType").length||((p=e("<input />")).prop({id:"formType",name:"formType",type:"hidden"}),p.val("static"),h.push(p.clone())),0==i.find(".loading-box").length&&((r=e("<img />")).prop("src","//paginas.rocks/content/images/spinner.gif"),(s=e("<div>")).text("aguarde"),(p=e("<div>")).addClass("loading-box"),p.append(r,s),f.push(p.clone())),0==i.find(".error-box").length&&((r=e("<img />")).prop("src","//paginas.rocks/content/images/error-icon.png"),s=e("<div>"),(l=e("<button>")).prop({type:"button",id:"btn-error"}),l.addClass("btn btn-default"),l.text("Ok"),(p=e("<div>")).addClass("error-box"),p.append(r,s,l),f.push(p.clone())),h.length>0&&i.prepend(h),f.length>0&&i.append(f),i.find(".error-box > button").on("click",(function(){t()})),d(i),a(i)})))}function r(e,i){"flex"===i?e.css({display:"flex",justifyContent:"center",alignItems:"center"}):e.css({display:"grid"})}function d(i){const n=i.find("input,textarea,select").filter("[required]");n.length>0&&e.each(n,(function(){e(this).removeAttr("required"),e(this).attr("data-required",!0)}))}function s(i){var n=i.serializeArray().reduce((function(e,i){let n=e[i.name]?e[i.name].split(","):[];return n.push(i.value),e[i.name]=n.join(","),e}),{});return e.ajax({url:i.prop("action"),method:i.prop("method"),data:n,beforeSend:function(){i.find("div.bee-form-row").hide(),i.find("div.form-row").hide(),i.find('button[type="submit"]').hide(),i.find("div.loading-box").show(),r(i,"flex")}})}function a(t){t.on("submit",(function(o){n(t);var d=!0,a=e(this).find('[data-required="true"]');a.length>0&&e(a).each((function(){"div"==e(this).prop("tagName").toLowerCase()&&(e(this).hasClass("checkbox-list")||e(this).hasClass("list"))?0==e(this).find('input[type="checkbox"]:checked').length&&0==e(this).find('input[type="radio"]:checked').length&&("LGPDValidation"==e(this).find('input[type="checkbox"]').prop("id")?e('<div class="field-error">Esse campo precisa ser confirmado</div>').insertBefore(e(this)):(e('<div class="field-error">Selecione ao menos uma opção</div>').insertBefore(e(this)),console.info("O campo de múltipla escolha requer que você selecione ao menos uma opção")),d=!1):""===e(this).val().trim()&&(e('<div class="field-error">Esse campo é obrigatório</div>').insertAfter(e(this)),console.info("O campo "+e(this).prop("name")+" é obrigatório"),d=!1)}));const l=e("#requiredFields");if(l.length&&l.val()){const i=l.val().split(",");i.length&&e(i).each((function(){if(!e('[name="'+this+'"]:checked').length){const i=e('[name="'+this+'"]')[0],n=e(i).attr("type"),t=e(i).parents(".bee-form-row");t.length&&(e('<div class="field-error">Selecione '+("checkbox"===n?"ao menos ":"")+"uma opção</div>").insertBefore(t),console.info("O campo "+this+" é obrigatório"),d=!1)}}))}return d&&s(t).done((function(n){if(n.errors){var o="";t.find("div.loading-box").hide(),e(n.errors).each((function(){if(this.field&&""!=this.field){const i=this.field.replace("#llerror","llfield"),n=t.find("input").filter((function(){return e(this).attr("name").toLowerCase()===i}));n&&n.length&&e('<div class="field-error">'+this.error+"</div>").insertAfter(n[0])}else o+="<br />"+this.error})),""!=o?(t.find("div.error-box>div").html(o),t.find("div.error-box").show()):(t.find("div.bee-form-row").show(),t.find("div.form-row").show(),t.find('button[type="submit"]').show(),r(t,"grid"))}else n=n.startsWith("http")?n:"http://"+n,"_blank"===new URLSearchParams(n).get("target")?(i.open(n,"_blank"),t.find("div.loading-box").hide(),t.find("div.bee-form-row").show(),t.find("div.form-row").show(),t.find('button[type="submit"]').show(),r(t,"grid"),t.append('<p style="color: #fff">Dados enviados com sucesso!</p>')):i.location.href=n})),o.preventDefault(),!1}))}e((function(){o()}))}(window.jQuery,window,document);